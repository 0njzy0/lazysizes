/*! lazysizes - v0.1.1 - 2014-10-12
 Licensed MIT */
!function(a){window.lazySizes=a(),"function"==typeof define&&define.amd&&define(function(){return window.lazySizes})}(function(){"use strict";function a(a,b){var c;window.picturefill?picturefill({reevaluate:!0,reparse:!0,elements:[a]}):window.respimage&&!respimage._.observer?(b&&(c=a[respimage._.ns],c&&(c[b.srcset?"srcset":"src"]=void 0)),respimage({reparse:!0,elements:[a]})):!window.HTMLPictureElement&&window.console&&console.log("Please use a responsive image polyfill, like respimage or picturefill. https://github.com/aFarkas/respimage")}function b(a){var b,c,d,e,f,g,h=a.getAttribute("data-tag")||"img",i=a.attributes;if(f=o.createElement(h),"script"!=h)for(b=0,c=i.length;c>b;b++)d=i[b].nodeName,e=d.replace(/^data\-/,""),"tag"!=e&&(!t[e]&&d in f||(e=d),f.setAttribute(e,i[b].nodeValue));return g=a.parentNode,g&&(g.insertBefore(f,a),"script"!=h?g.removeChild(a):(a.removeAttribute("data-src"),x(function(){m(a,"lazyload")}))),f}function c(){j=0,clearTimeout(i)}function d(c,d){var e,g,h,i,j=c.getAttribute("data-sizes"),k=c.getAttribute("data-src"),n=c.getAttribute("data-srcset"),o=c.parentNode;if(k||n){if(p.test(c.nodeName)&&(c=b(c)),r.test(c.nodeName||"")){if(y[k])return;y[k]=!0}else if(s.test(c.nodeName||"")){if(!d&&!c.complete&&c.getAttribute("src")&&c.src)return c.removeEventListener("load",z,!1),c.removeEventListener("error",z,!1),c.addEventListener("load",z,!1),void c.addEventListener("error",z,!1);if(q.test(o.nodeName||""))for(e=o.getElementsByTagName("source"),g=0,h=e.length;h>g;g++)i=e[g].getAttribute("data-srcset"),i&&e[g].setAttribute("srcset",i)}j&&("auto"==j?f(c,!0):c.setAttribute("sizes",j),c.removeAttribute("data-sizes"),!n&&window.console&&c.getAttribute("srcset")&&console.log("using lazysizes with a `srcset` attribute is not good. Use `data-srcset` instead")),n?(c.setAttribute("srcset",n),c.removeAttribute("data-srcset")):k&&(c.setAttribute("src",k),c.removeAttribute("data-src"))}x(function(){m(c,"lazyload"),"auto"==j&&l(c,"lazyautosizes"),(n||j)&&a(c,{srcset:n,src:k})})}function e(){h=0,clearTimeout(g)}function f(b,c){var d,e,f,g,h,i,j;if(g=b.parentNode,g&&(d=g.offsetWidth,e=b.offsetWidth,f=e>d?e:d,f&&(!b._lazysizesWidth||f>b._lazysizesWidth))){if(b._lazysizesWidth=f,f+="px",b.setAttribute("sizes",f),q.test(g.nodeName||""))for(h=g.getElementsByTagName("source"),i=0,j=h.length;j>i;i++)h[i].setAttribute("sizes",f);c||a(b)}}if(Date.now&&window.document.getElementsByClassName){var g,h,i,j,k,l,m,n,o=window.document,p=/^(?:span|div)$/i,q=/^picture$/i,r=/^script$/i,s=/^img$/i,t={sizes:1,src:1,srcset:1},u=66,v=o.getElementsByClassName("lazyload"),w=o.getElementsByClassName("lazyautosizes"),x=window.setImmediate||window.setTimeout,y={},z=function(a){a.target.removeEventListener("load",z,!1),a.target.removeEventListener("error",z,!1),d(a.target,!0)};o.documentElement.classList?(l=function(a,b){a.classList.add(b)},m=function(a,b){a.classList.remove(b)},n=function(a,b){a.classList.contains(b)}):(l=function(a,b){n(a,b)||(a.className+=" "+b)},m=function(a,b){var c;n(a,b)&&(c=new RegExp("(\\s|^)"+b+"(\\s|$)"),a.className=a.className.replace(c," "))},n=function(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))});var A=function(){var a,b,d=function(){b=!1,clearTimeout(a),c(),B()};return{debounce:function(){clearTimeout(a),clearTimeout(k),b=!0,a=setTimeout(d,66)},throttled:function(){b||(b=!0,clearTimeout(a),a=setTimeout(d,99))}}}(),B=function(){var a,b,e,f,g,h,k,l,m,n,o,p=v.length;if(p)for(a=Date.now(),e=0,f=window.innerWidth+u,g=window.innerHeight+u,o=-1*u,b=j||0,c();p>b;b++)if(h=v[b].getBoundingClientRect(),(n=h.bottom)>=o&&(k=h.top)<=g&&(m=h.right)>=o&&(l=h.left)<=f&&(n||m||l||k))d(v[b]);else if(e++,e>2&&p-1>b&&Date.now()-a>9){j=b+1,i=setTimeout(B,20);break}},C=function(){var a,b=function(){clearTimeout(a),e(),D()};return function(){clearTimeout(a),clearTimeout(g),a=setTimeout(b,99)}}(),D=function(){var a,b,c,d=w.length;if(d)for(b=Date.now(),c=h||0,a=c+3,e();d>c;c++)if(f(w[c]),c>a&&d-1>c&&Date.now()-b>9){h=c+1,g=setTimeout(D,20);break}},E=function(){u*=3,clearTimeout(k),o.addEventListener("load",A.throttled,!0)},F=function(){window.MutationObserver?new MutationObserver(A.throttled).observe(o.body||o.documentElement,{childList:!0,subtree:!0,attributes:!0}):((o.body||o.documentElement).addEventListener("DOMNodeInserted",A.throttled,!0),(o.body||o.documentElement).addEventListener("DOMAttrModified",A.throttled,!0))};return window.addEventListener("scroll",A.throttled,!1),(o.body||o.documentElement).addEventListener("scroll",A.throttled,!0),o.addEventListener("touchmove",A.throttled,!1),window.addEventListener("resize",A.debounce,!1),window.addEventListener("resize",C,!1),/^i|^loade|c/.test(o.readyState)?F():o.addEventListener("DOMContentLoaded",F,!1),"complete"==o.readyState?E():(window.addEventListener("load",E,!1),o.addEventListener("readystatechange",A.throttled,!1)),A.throttled(),{updateAllSizes:C,updateAllLazy:A.throttled,unveilLazy:function(a){n(a,"lazyload")&&d(a)},updateSizes:f}}});