/*! lazysizes - v0.7.2 - 2015-01-12
 Licensed MIT */
!function(a){window.lazySizes=a(window),"function"==typeof define&&define.amd&&define(window.lazySizes)}(function(a){"use strict";if(a.document.getElementsByClassName){var b,c=a.document,d=c.documentElement,e=/^picture$/i,f=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");return a.className.match(c)&&c},g=function(a,b){f(a,b)||(a.className+=" "+b)},h=function(a,b){var c;(c=f(a,b))&&(a.className=a.className.replace(c," "))},i=function(a,b,c){var d=c?"addEventListener":"removeEventListener";c&&i(a,b),["load","error","lazyincluded","_lazyloaded"].forEach(function(c){a[d](c,b,!0)})},j=function(a,b,d){var e=c.createEvent("Event");return e.initEvent(b,!0,!0),e.details=d||{},a.dispatchEvent(e),e},k=function(b,c){var d;a.HTMLPictureElement||(a.picturefill?picturefill({reevaluate:!0,reparse:!0,elements:[b]}):a.respimage?(c&&(d=b[respimage._.ns],d&&(d[c.srcset?"srcset":"src"]=void 0)),respimage({reparse:!0,elements:[b]})):c&&c.src&&(b.src=c.src))},l=function(a,b){return getComputedStyle(a,null)[b]},m=function(a,d){var e,f;for(a._lazysizesWidth||(f=a.getAttribute("alt"),a.alt=""),e=a.offsetWidth;e<b.minSize&&d&&d!=c.body&&!a._lazysizesWidth;)e=d.offsetWidth,d=d.parentNode;return a._lazysizesWidth||(null==f?a.removeAttribute("alt"):a.alt=f),e},n=function(a){var b;return setInterval(function(){b&&(b=!1,a())},66),function(c){c===!0?a():b=!0}},o=function(){var f,m,o,q,r,s,t,u,v,w,x=navigator.userAgent,y=a.HTMLPictureElement&&x.match(/hrome\/(\d+)/)&&40==RegExp.$1,z=/blink|webkit/i.test(x),A=/^img$/i,B=/^iframe$/i,C=-2,D=C,E=60,F=D,G=!0,H=0,I=0,J=function(a){I--,a&&a.target&&i(a.target,J),(!a||0>I||!a.target)&&(I=0)},K=function(){o&&!G&&(D=Math.max(Math.min(b.expand||b.threshold||95,300),30),E=Math.min(7*D,Math.max(innerHeight,d.clientHeight,500))),G=!0},L=function(a,b){var e,f=a,g="hidden"!=l(a,"visibility");for(t-=b,w+=b,u-=b,v+=b;g&&(f=f.offsetParent)&&f!=d&&f!=c.body;)g=o&&4>I||(l(f,"opacity")||1)>0,g&&"visible"!=l(f,"overflow")&&(e=f.getBoundingClientRect(),g=v>e.left-1&&u<e.right+1&&w>e.top-1&&t<e.bottom+1);return g},M=function(){var a,c,d,e,g,h,i,j=0,k=f.length;if(G||K(),k){for(;k>j;j++)e=F,I>6&&(!h||"src"in f[j])||(I>2&&e>0&&(e=C),i!==e&&(r=innerWidth+e,s=innerHeight+e,g=-1*e,i=e),a=f[j].getBoundingClientRect(),(w=a.bottom)>=g&&(t=a.top)<=s&&(v=a.right)>=g&&(u=a.left)<=r&&(w||v||u||t)&&(o&&F==D&&3>I&&9>H&&!h||L(f[j],e))?(P(f[j]),d=!0):!d&&o&&!c&&3>I&&9>H&&(m[0]||b.preloadAfterLoad)&&(m[0]||!h&&(w||v||u||t||"auto"!=f[j].getAttribute(b.sizesAttr)))&&(c=m[0]||f[j]));H++,E>F&&2>I&&H>9?(F=E,H=0,N()):F!=D&&(F=D),c&&!d&&P(c)}},N=n(M),O=function(a){g(a.target,b.loadedClass),h(a.target,b.loadingClass),i(a.target,O)},P=function(a,c){var d,f,l,m,n,r,s,t,u,v,w,x=a.currentSrc||a.src,C=A.test(a.nodeName);if(z||o||!C||!x||a.complete){if(!(v=j(a,"lazybeforeunveil",{force:!!c})).defaultPrevented&&(n=a.getAttribute(b.sizesAttr)||a.getAttribute("sizes"),n&&("auto"==n?p.updateElem(a,!0):a.setAttribute("sizes",n),b.clearAttr&&a.removeAttribute(b.sizesAttr)),s=a.getAttribute(b.srcsetAttr),r=a.getAttribute(b.srcAttr),w=v.details.firesLoad||"src"in a&&(s||r),w&&(I++,i(a,J,!0),clearTimeout(q),q=setTimeout(J,3e3),C&&(t=a.parentNode,u=e.test(t.nodeName||""))),b.addClasses&&(g(a,b.loadingClass),i(a,O,!0)),s||r)){if(u)for(d=t.getElementsByTagName("source"),f=0,l=d.length;l>f;f++)m=d[f].getAttribute(b.srcsetAttr),m&&d[f].setAttribute("srcset",m);if(s)a.setAttribute("srcset",s),y&&n&&a.removeAttribute("src"),b.clearAttr&&a.removeAttribute(b.srcsetAttr);else if(r){if(!C&&B.test(a.nodeName))try{a.contentWindow.location.replace(r)}catch(D){a.setAttribute("src",r)}else a.setAttribute("src",r);b.clearAttr&&a.removeAttribute(b.srcAttr)}}setTimeout(function(){h(a,b.lazyClass),"auto"==n&&g(a,b.autosizesClass),(s||n)&&k(a,{srcset:s,src:r}),a.lazyload&&(a.lazyload=0),(!w||a.complete&&x==(a.currentSrc||a.src))&&(w&&J({target:a}),b.addClasses&&O({target:a})),a=null})}},Q=function(){o=!0,G=!1,M()},R=function(){f=c.getElementsByClassName(b.lazyClass),m=c.getElementsByClassName(b.lazyClass+" "+b.preloadClass),b.scroll&&addEventListener("scroll",N,!0),addEventListener("resize",function(){G=!1,N()},!1),a.MutationObserver?new MutationObserver(N).observe(d,{childList:!0,subtree:!0,attributes:!0}):(d.addEventListener("DOMNodeInserted",N,!0),d.addEventListener("DOMAttrModified",N,!0)),addEventListener("hashchange",N,!0),["transitionstart","transitionend","load","focus","mouseover","animationend"].forEach(function(a){c.addEventListener(a,N,!0)}),/d$|^c/.test(c.readyState)?Q():(c.addEventListener("DOMContentLoaded",N,!1),addEventListener("load",Q,!1),N())};return{init:R,checkElems:N,unveil:P}}(),p=function(){var a,d=function(a,c){var d,f,g,h,i,l=a.parentNode;if(l&&(d=m(a,l),i=j(a,"lazybeforesizes",{width:d,dataAttr:!!c}),!i.defaultPrevented&&(d=i.details.width,d&&d!==a._lazysizesWidth&&(!b.onlyLargerSizes||!a._lazysizesWidth||a._lazysizesWidth<d)))){if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),e.test(l.nodeName||""))for(f=l.getElementsByTagName("source"),g=0,h=f.length;h>g;g++)f[g].setAttribute("sizes",d);i.details.dataAttr||k(a)}},f=function(){var b,c=a.length;if(c)for(b=0;c>b;b++)d(a[b])},g=n(f),h=function(){a=c.getElementsByClassName(b.autosizesClass),addEventListener("resize",g,!1)};return{init:h,checkElems:g,updateElem:d}}();return function(){var c,d={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",scroll:!0,autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",onlyLargerSizes:!0,minSize:40};b=a.lazySizesConfig||{};for(c in d)c in b||(b[c]=d[c]);a.lazySizesConfig=b,setTimeout(function(){p.init(),o.init()})}(),{cfg:b,autoSizer:p,loader:o,updateAllSizes:p.updateElems,updateAllLazy:o.checkElems,unveilLazy:o.unveil,uS:p.updateElem,uP:k,aC:g,rC:h,hC:f,fire:j,gW:m}}});