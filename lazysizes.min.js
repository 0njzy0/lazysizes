/*! lazysizes - v0.7.2-RC1 - 2015-01-08
 Licensed MIT */
!function(a){window.lazySizes=a(window),"function"==typeof define&&define.amd&&define(window.lazySizes)}(function(a){"use strict";function b(b,c){var d;a.HTMLPictureElement||(a.picturefill?picturefill({reevaluate:!0,reparse:!0,elements:[b]}):a.respimage?(c&&(d=b[respimage._.ns],d&&(d[c.srcset?"srcset":"src"]=void 0)),respimage({reparse:!0,elements:[b]})):c&&c.src&&(b.src=c.src))}function c(a,b){return getComputedStyle(a,null)[b]}function d(a,c){var d,e,g,h,i,k,l,o,q,r,y=a.currentSrc||a.src,z=w.test(a.nodeName);if(u||p||!z||!y||a.complete){if(!(r=E(a,"lazybeforeunveil",{force:!!c})).defaultPrevented&&(i=a.getAttribute(j.sizesAttr)||a.getAttribute("sizes"),i&&("auto"==i?f(a,!0):a.setAttribute("sizes",i),j.clearAttr&&a.removeAttribute(j.sizesAttr)),l=a.getAttribute(j.srcsetAttr),k=a.getAttribute(j.srcAttr),s++,D(a,P,!0),clearTimeout(G),G=setTimeout(P,3e3),z&&(o=a.parentNode,q=v.test(o.nodeName||"")),z&&(m(a,j.loadingClass),D(a,T,!0)),l||k)){if(q)for(d=o.getElementsByTagName("source"),e=0,g=d.length;g>e;e++)h=d[e].getAttribute(j.srcsetAttr),h&&d[e].setAttribute("srcset",h);l?(a.setAttribute("srcset",l),t&&i&&a.removeAttribute("src"),j.clearAttr&&a.removeAttribute(j.srcsetAttr)):k&&(a.setAttribute("src",k),j.clearAttr&&a.removeAttribute(j.srcAttr))}setTimeout(function(){n(a,j.lazyClass),"auto"==i&&m(a,j.autosizesClass),(l||i)&&b(a,{srcset:l,src:k}),a.lazyload&&(a.lazyload=0),r.details.firesLoad||x.test(a.nodeName)&&(l||k)&&(!a.complete||y!=(a.currentSrc||a.src))||(j.addClasses&&T({target:a}),P({target:a})),a=null})}}function e(){l=0,clearTimeout(k)}function f(a,c){var d,e,f,g,h,i=a.parentNode;if(i&&(d=W(a,i),h=E(a,"lazybeforesizes",{width:d,dataAttr:!!c}),!h.defaultPrevented&&(d=h.details.width,d&&d!==a._lazysizesWidth&&(!j.onlyLargerSizes||!a._lazysizesWidth||a._lazysizesWidth<d)))){if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),v.test(i.nodeName||""))for(e=i.getElementsByTagName("source"),f=0,g=e.length;g>f;f++)e[f].setAttribute("sizes",d);h.details.dataAttr||b(a)}}if(a.document.getElementsByClassName){var g,h,i,j,k,l,m,n,o,p,q=a.document,r=q.documentElement,s=0,t=a.HTMLPictureElement&&navigator.userAgent.match(/hrome\/(\d+)/)&&(40==RegExp.$1||41==RegExp.$1),u=/blink|webkit/i.test(navigator.userAgent),v=/^picture$/i,w=/^img$/i,x=/^(?:img|iframe)$/i,y=-2,z=y,A=40,B=0,C=0,D=function(a,b,c){var d=c?"addEventListener":"removeEventListener";c&&D(a,b),["load","error","lazyincluded","_lazyloaded"].forEach(function(c){a[d](c,b,!0)})},E=function(a,b,c){var d=q.createEvent("Event");return d.initEvent(b,!0,!0),d.details=c||{},a.dispatchEvent(d),d};m=function(a,b){o(a,b)||(a.className+=" "+b)},n=function(a,b){var c;(c=o(a,b))&&(a.className=a.className.replace(c," "))},o=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");return a.className.match(c)&&c};var F,G,H,I,J,K,L,M,N,O=Date.now(),P=function(a){s--,a&&a.target&&D(a.target,P),(!a||0>s||!a.target)&&(s=0)},Q=function(){var a,b,c=function(){clearTimeout(a),C=0,S(),b=!1};return function(){b||(b=!0,clearTimeout(a),a=setTimeout(c,66))}}(),R=function(a){var b,d=a,e="hidden"!=c(a,"visibility"),f=3>s?z:-2;for(J-=f,M+=f,K-=f,L+=f;e&&(d=d.offsetParent)&&d!=r&&d!=q.body;)e=c(d,"opacity")>0,e&&"visible"!=c(d,"overflow")&&(b=d.getBoundingClientRect(),e=L>b.left-1&&K<b.right+1&&M>b.top-1&&J<b.bottom+1);return e},S=function(){var a,b,c;if(F=g.length,O=Date.now(),F){for(H=innerWidth+z,I=innerHeight+z,N=-1*z;F>C;C++)if(s>3&&z>0&&(z=-2,H=innerWidth+z,I=innerHeight+z,N=2),a=g[C].getBoundingClientRect(),(M=a.bottom)>=N&&(J=a.top)<=I&&(L=a.right)>=N&&(K=a.left)<=H&&(M||L||K||J)&&(p&&z==y&&3>s&&9>B||R(g[C])))d(g[C]),c=!0;else if(!c&&p&&!b&&3>s&&9>B&&(i[0]||j.preloadAfterLoad)&&(i[0]||M||L||K||J||"auto"!=g[C].getAttribute(j.sizesAttr))&&(b=i[0]||g[C]),F-1>C&&Date.now()-O>9){b=!1,setTimeout(S);break}B++,A>z&&2>s&&B>9?(z=A,B=0,setTimeout(Q)):z!=y&&(z=y),b&&!c&&d(b)}},T=function(a){m(a.target,j.loadedClass),n(a.target,j.loadingClass),D(a.target,T)},U=function(){var a,b=function(){clearTimeout(a),e(),V()};return function(){clearTimeout(a),clearTimeout(k),a=setTimeout(b,99)}}(),V=function(){var a,b,c,d=h.length;if(d)for(b=Date.now(),c=l||0,a=c+3,e();d>c;c++)if(f(h[c]),c>a&&d-1>c&&Date.now()-b>9){l=c+1,k=setTimeout(V);break}},W=function(a,b){var d,e,f,g;for(a._lazysizesWidth||(g=a.getAttribute("alt"),a.alt=""),d=b.offsetWidth,e=a.offsetWidth,f=e>=d||"block"==c(a,"display")?e:d;b&&b!=q.body&&f<j.minSize&&!a._lazysizesWidth;)f=b.offsetWidth,b=b.parentNode;return a._lazysizesWidth||(null==g?a.removeAttribute("alt"):a.alt=g),f},X=function(){y=Math.max(Math.min(j.threshold||150,300),40),A=Math.min(7*y,Math.max(1.2*innerHeight,1.2*r.clientHeight,4*y)),p=/d$|^c/.test(q.readyState),z=p?A:y};return j=a.lazySizesConfig||{},function(){var b,c={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",scroll:!0,autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",onlyLargerSizes:!0,minSize:33};for(b in c)b in j||(j[b]=c[b]);a.lazySizesConfig=j}(),setTimeout(function(){var b=q.readyState;g=q.getElementsByClassName(j.lazyClass),i=q.getElementsByClassName(j.lazyClass+" "+j.preloadClass),h=q.getElementsByClassName(j.autosizesClass),j.scroll&&addEventListener("scroll",Q,!0),addEventListener("resize",Q,!1),addEventListener("resize",U,!1),a.MutationObserver?new MutationObserver(Q).observe(r,{childList:!0,subtree:!0,attributes:!0}):(r.addEventListener("DOMNodeInserted",Q,!0),r.addEventListener("DOMAttrModified",Q,!0)),addEventListener("hashchange",Q,!0),["transitionstart","transitionend","load","focus","mouseover","animationend"].forEach(function(a){q.addEventListener(a,Q,!0)}),q.addEventListener("DOMContentLoaded",Q,!1),/d$|^c/.test(b)?X():(addEventListener("load",X,!1),setTimeout(X,6e3),setTimeout(S))}),{cfg:j,updateAllSizes:U,updateAllLazy:function(a){a?(C=0,S()):Q()},unveilLazy:function(a){o(a,j.lazyClass)&&d(a)},uS:f,uP:b,aC:m,rC:n,hC:o,fire:E,gW:W}}});