/*! lazysizes - v0.7.2 - 2015-01-13
 Licensed MIT */
!function(a,b){a.lazySizes=b(a,a.document),"function"==typeof define&&define.amd&&define(a.lazySizes)}(window,function(a,b){"use strict";if(b.getElementsByClassName){var c,d=b.documentElement,e=/^picture$/i,f=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");return a.className.match(c)&&c},g=function(a,b){f(a,b)||(a.className+=" "+b)},h=function(a,b){var c;(c=f(a,b))&&(a.className=a.className.replace(c," "))},i=function(a,b,c){var d=c?"addEventListener":"removeEventListener";c&&i(a,b),["load","error","lazyincluded","_lazyloaded"].forEach(function(c){a[d](c,b,!0)})},j=function(a,c,d){var e=b.createEvent("Event");return e.initEvent(c,!0,!0),e.details=d||{},a.dispatchEvent(e),e},k=function(b,c){var d;a.HTMLPictureElement||(a.picturefill?picturefill({reevaluate:!0,reparse:!0,elements:[b]}):a.respimage?(c&&(d=b[respimage._.ns],d&&(d[c.srcset?"srcset":"src"]=void 0)),respimage({reparse:!0,elements:[b]})):c&&c.src&&(b.src=c.src))},l=function(a,b){return getComputedStyle(a,null)[b]},m=function(a,d){var e,f;for(a._lazysizesWidth||(f=a.getAttribute("alt"),a.alt=""),e=a.offsetWidth;e<c.minSize&&d&&d!=b.body&&!a._lazysizesWidth;)e=d.offsetWidth,d=d.parentNode;return a._lazysizesWidth||(null==f?a.removeAttribute("alt"):a.alt=f),e},n=function(a){var b;return setInterval(function(){b&&(b=!1,a())},66),function(c){c===!0?a():b=!0}},o=function(){var f,m,o,q,r,s,t,u,v,w,x=navigator.userAgent,y=a.HTMLPictureElement&&x.match(/hrome\/(\d+)/)&&40==RegExp.$1,z=/blink|webkit/i.test(x),A=/^img$/i,B=/^iframe$/i,C=-2,D=C,E=60,F=D,G=!0,H=0,I=0,J=0,K=function(a){I--,a&&a.target&&i(a.target,K),(!a||0>I||!a.target)&&(I=0)},L=function(){o&&!G&&(D=Math.max(Math.min(c.expand||c.threshold||95,300),30),E=Math.min(7*D,Math.max(innerHeight,d.clientHeight,500))),G=!0},M=function(a,c){var e,f=a,g="hidden"!=l(a,"visibility");for(t-=c,w+=c,u-=c,v+=c;g&&(f=f.offsetParent)&&f!=d&&f!=b.body;)g=o&&4>I||(l(f,"opacity")||1)>0,g&&"visible"!=l(f,"overflow")&&(e=f.getBoundingClientRect(),g=v>e.left-1&&u<e.right+1&&w>e.top-1&&t<e.bottom+1);return g},N=function(){var a,b,d,e,g,h,i,j=f.length,k=Date.now(),l=J;if(G||L(),j){for(;j>l;l++,J++)if((h=f[l].getAttribute("data-expand"))&&(e=1*h)||(e=F),!(I>6&&(!h||"src"in f[l])))if(I>2&&e>0&&(e=C),i!==e&&(r=innerWidth+e,s=innerHeight+e,g=-1*e,i=e),a=f[l].getBoundingClientRect(),(w=a.bottom)>=g&&(t=a.top)<=s&&(v=a.right)>=g&&(u=a.left)<=r&&(w||v||u||t)&&(o&&F==D&&3>I&&9>H&&!h||M(f[l],e)))J--,k++,R(f[l]),d=!0;else{if(Date.now()-k>6)return J++,void O();!d&&o&&!b&&3>I&&9>H&&(m[0]||c.preloadAfterLoad)&&(m[0]||!h&&(w||v||u||t||"auto"!=f[l].getAttribute(c.sizesAttr)))&&(b=m[0]||f[l])}J=0,H++,E>F&&2>I&&H>9?(F=E,H=0,O()):F!=D&&(F=D),b&&!d&&R(b)}},O=n(N),P=function(a){g(a.target,c.loadedClass),h(a.target,c.loadingClass),i(a.target,P)},Q=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.setAttribute("src",b)}},R=function(a,b){var d,f,l,m,n,r,s,t,u,v,w,x=a.currentSrc||a.src,C=A.test(a.nodeName);if(z||o||!C||!x||a.complete){if(!(v=j(a,"lazybeforeunveil",{force:!!b})).defaultPrevented){if(n=a.getAttribute(c.sizesAttr)||a.getAttribute("sizes"),n&&("auto"==n?p.updateElem(a,!0):a.setAttribute("sizes",n)),s=a.getAttribute(c.srcsetAttr),r=a.getAttribute(c.srcAttr),w=v.details.firesLoad||"src"in a&&(s||r),w&&(I++,i(a,K,!0),clearTimeout(q),q=setTimeout(K,3e3),C&&(t=a.parentNode,u=e.test(t.nodeName||""))),s||r){if(u)for(d=t.getElementsByTagName("source"),f=0,l=d.length;l>f;f++)m=d[f].getAttribute(c.srcsetAttr),m&&d[f].setAttribute("srcset",m);s?(a.setAttribute("srcset",s),y&&n&&a.removeAttribute("src")):r&&(B.test(a.nodeName)?Q(a,r):a.setAttribute("src",r))}c.addClasses&&(g(a,c.loadingClass),i(a,P,!0))}setTimeout(function(){"auto"==n&&g(a,c.autosizesClass),(s||n)&&k(a,{srcset:s,src:r}),h(a,c.lazyClass),(!w||a.complete&&x==(a.currentSrc||a.src))&&(w&&K({target:a}),c.addClasses&&P({target:a})),a=null})}},S=function(){o=!0,G=!1,N()},T=function(){f=b.getElementsByClassName(c.lazyClass),m=b.getElementsByClassName(c.lazyClass+" "+c.preloadClass),c.scroll&&addEventListener("scroll",O,!0),addEventListener("resize",function(){G=!1,O()},!1),a.MutationObserver?new MutationObserver(O).observe(d,{childList:!0,subtree:!0,attributes:!0}):(d.addEventListener("DOMNodeInserted",O,!0),d.addEventListener("DOMAttrModified",O,!0)),addEventListener("hashchange",O,!0),["transitionstart","transitionend","load","focus","mouseover","animationend"].forEach(function(a){b.addEventListener(a,O,!0)}),/d$|^c/.test(b.readyState)?S():(b.addEventListener("DOMContentLoaded",O,!1),addEventListener("load",S,!1),setTimeout(S,9999),O())};return{init:T,checkElems:O,unveil:R}}(),p=function(){var a,d=function(a,b){var d,f,g,h,i,l=a.parentNode;if(l&&(d=m(a,l),i=j(a,"lazybeforesizes",{width:d,dataAttr:!!b}),!i.defaultPrevented&&(d=i.details.width,d&&d!==a._lazysizesWidth&&(!c.onlyLargerSizes||!a._lazysizesWidth||a._lazysizesWidth<d)))){if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),e.test(l.nodeName||""))for(f=l.getElementsByTagName("source"),g=0,h=f.length;h>g;g++)f[g].setAttribute("sizes",d);i.details.dataAttr||k(a)}},f=function(){var b,c=a.length;if(c)for(b=0;c>b;b++)d(a[b])},g=n(f),h=function(){a=b.getElementsByClassName(c.autosizesClass),addEventListener("resize",g,!1)};return{init:h,checkElems:g,updateElem:d}}();return function(){var b,d={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",scroll:!0,autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",onlyLargerSizes:!0,minSize:40};c=a.lazySizesConfig||{};for(b in d)b in c||(c[b]=d[b]);a.lazySizesConfig=c,setTimeout(function(){p.init(),o.init()})}(),{cfg:c,autoSizer:p,loader:o,updateAllSizes:p.updateElems,updateAllLazy:o.checkElems,unveilLazy:o.unveil,uS:p.updateElem,uP:k,aC:g,rC:h,hC:f,fire:j,gW:m}}});