/*! lazysizes - v0.7.2 - 2015-01-16
 Licensed MIT */
!function(a,b){a.lazySizes=b(a,a.document),"function"==typeof define&&define.amd&&define(a.lazySizes)}(window,function(a,b){"use strict";if(b.getElementsByClassName){var c,d=b.documentElement,e=/^picture$/i,f=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");return a.className.match(c)&&c},g=function(a,b){f(a,b)||(a.className+=" "+b)},h=function(a,b){var c;(c=f(a,b))&&(a.className=a.className.replace(c," "))},i=function(a,b,c){var d=c?"addEventListener":"removeEventListener";c&&i(a,b),["load","error","lazyincluded","_lazyloaded"].forEach(function(c){a[d](c,b,!0)})},j=function(a,c,d){var e=b.createEvent("Event");return e.initEvent(c,!0,!0),e.details=d||{},a.dispatchEvent(e),e},k=function(b,c){var d;a.HTMLPictureElement||(a.picturefill?picturefill({reevaluate:!0,reparse:!0,elements:[b]}):a.respimage?(c&&(d=b[respimage._.ns],d&&(d[c.srcset?"srcset":"src"]=void 0)),respimage({reparse:!0,elements:[b]})):c&&c.src&&(b.src=c.src))},l=function(a,b){return getComputedStyle(a,null)[b]},m=function(a,d){var e,f;for(a._lazysizesWidth||(f=a.getAttribute("alt"),a.alt=""),e=a.offsetWidth;e<c.minSize&&d&&d!=b.body&&!a._lazysizesWidth;)e=d.offsetWidth,d=d.parentNode;return a._lazysizesWidth||(null==f?a.removeAttribute("alt"):a.alt=f),e},n=function(a){var b;return setInterval(function(){b&&(b=!1,a())},66),function(c){c===!0?a():b=!0}},o=function(){var f,m,o,q,r,s,t,u,v,w,x,y=navigator.userAgent,z=a.HTMLPictureElement&&y.match(/hrome\/(\d+)/)&&40==RegExp.$1,A=/blink|webkit/i.test(y),B=/^img$/i,C=/^iframe$/i,D=-2,E=D,F=D,G=D,H=!0,I=0,J=0,K=0,L=function(a){J--,a&&a.target&&i(a.target,L),(!a||0>J||!a.target)&&(J=0)},M=function(){o&&!H&&(E=Math.max(Math.min(c.expand||c.threshold||150,300),30),F=Math.min(4*E,Math.max(1.1*innerHeight,d.clientHeight,3*E))),H=!0},N=function(a,c){var e,f=a,g="hidden"!=l(a,"visibility");for(u-=c,x+=c,v-=c,w+=c;g&&(f=f.offsetParent)&&f!=d&&f!=b.body;)g=o&&4>J||(l(f,"opacity")||1)>0,g&&"visible"!=l(f,"overflow")&&(e=f.getBoundingClientRect(),g=w>e.left-1&&v<e.right+1&&x>e.top-1&&u<e.bottom+1);return g},O=function(){var a,b,d,e,g,h,i,j=f.length,k=Date.now(),l=K;if(H||M(),j){for(;j>l;l++,K++)if((h=f[l].getAttribute("data-expand"))&&(e=1*h)||(e=G),!(J>6&&(!h||"src"in f[l])))if(J>3&&e>D&&(e=D),i!==e&&(s=innerWidth+e,t=innerHeight+e,g=-1*e,i=e),a=f[l].getBoundingClientRect(),(x=a.bottom)>=g&&(u=a.top)<=t&&(w=a.right)>=g&&(v=a.left)<=s&&(x||w||v||u)&&(o&&G==E&&3>J&&4>I&&!h||N(f[l],e)))K--,k++,S(f[l]),d=!0;else{if(Date.now()-k>6)return K++,void P();!d&&q&&!b&&3>J&&4>I&&(m[0]||c.preloadAfterLoad)&&(m[0]||!h&&(x||w||v||u||"auto"!=f[l].getAttribute(c.sizesAttr)))&&(b=m[0]||f[l])}K=0,I++,F>G&&2>J&&I>4?(G=F,I=0,P()):G!=E&&(G=E),b&&!d&&S(b)}},P=n(O),Q=function(a){g(a.target,c.loadedClass),h(a.target,c.loadingClass),i(a.target,Q)},R=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.setAttribute("src",b)}},S=function(a,b){var d,f,l,m,n,q,s,t,u,v,w,x=a.currentSrc||a.src,y=B.test(a.nodeName);if(A||o||!y||!x||a.complete){if(!(v=j(a,"lazybeforeunveil",{force:!!b})).defaultPrevented){if(n=a.getAttribute(c.sizesAttr)||a.getAttribute("sizes"),n&&("auto"==n?p.updateElem(a,!0):a.setAttribute("sizes",n)),s=a.getAttribute(c.srcsetAttr),q=a.getAttribute(c.srcAttr),w=v.details.firesLoad||"src"in a&&(s||q),w&&(J++,i(a,L,!0),clearTimeout(r),r=setTimeout(L,3e3),y&&(t=a.parentNode,u=e.test(t.nodeName||""))),s||q){if(u)for(d=t.getElementsByTagName("source"),f=0,l=d.length;l>f;f++)m=d[f].getAttribute(c.srcsetAttr),m&&d[f].setAttribute("srcset",m);s?(a.setAttribute("srcset",s),z&&n&&a.removeAttribute("src")):q&&(C.test(a.nodeName)?R(a,q):a.setAttribute("src",q))}c.addClasses&&(g(a,c.loadingClass),i(a,Q,!0))}setTimeout(function(){"auto"==n&&g(a,c.autosizesClass),(s||n)&&k(a,{srcset:s,src:q}),h(a,c.lazyClass),(!w||a.complete&&x==(a.currentSrc||a.src))&&(w&&L({target:a}),c.addClasses&&Q({target:a})),a=null})}},T=function(){o=!0,H=!1},U=function(){T(),q=!0,P(!0)},V=function(){f=b.getElementsByClassName(c.lazyClass),m=b.getElementsByClassName(c.lazyClass+" "+c.preloadClass),c.scroll&&addEventListener("scroll",P,!0),addEventListener("resize",function(){H=!1,P()},!1),a.MutationObserver?new MutationObserver(P).observe(d,{childList:!0,subtree:!0,attributes:!0}):(d.addEventListener("DOMNodeInserted",P,!0),d.addEventListener("DOMAttrModified",P,!0)),addEventListener("hashchange",P,!0),["transitionstart","transitionend","load","focus","mouseover","animationend"].forEach(function(a){b.addEventListener(a,P,!0)}),addEventListener("load",U,!1),b.addEventListener("DOMContentLoaded",P,!1),setTimeout(T,666),P()};return{init:V,checkElems:P,unveil:S}}(),p=function(){var a,d=function(a,b){var d,f,g,h,i,l=a.parentNode;if(l&&(d=m(a,l),i=j(a,"lazybeforesizes",{width:d,dataAttr:!!b}),!i.defaultPrevented&&(d=i.details.width,d&&d!==a._lazysizesWidth&&(!c.onlyLargerSizes||!a._lazysizesWidth||a._lazysizesWidth<d)))){if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),e.test(l.nodeName||""))for(f=l.getElementsByTagName("source"),g=0,h=f.length;h>g;g++)f[g].setAttribute("sizes",d);i.details.dataAttr||k(a)}},f=function(){var b,c=a.length;if(c)for(b=0;c>b;b++)d(a[b])},g=n(f),h=function(){a=b.getElementsByClassName(c.autosizesClass),addEventListener("resize",g,!1)};return{init:h,checkElems:g,updateElem:d}}();return function(){var b,d={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",scroll:!0,autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",onlyLargerSizes:!0,minSize:40};c=a.lazySizesConfig||{};for(b in d)b in c||(c[b]=d[b]);a.lazySizesConfig=c,setTimeout(function(){p.init(),o.init()})}(),{cfg:c,autoSizer:p,loader:o,updateAllSizes:p.updateElems,updateAllLazy:o.checkElems,unveilLazy:o.unveil,uS:p.updateElem,uP:k,aC:g,rC:h,hC:f,fire:j,gW:m}}});