/*! lazysizes - v0.8.0-RC1 - 2015-01-17
 Licensed MIT */
!function(a,b){a.lazySizes=b(a,a.document),"function"==typeof define&&define.amd&&define(a.lazySizes)}(window,function(a,b){"use strict";if(b.getElementsByClassName){var c,d=b.documentElement,e=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],g=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");return a.className.match(c)&&c},h=function(a,b){g(a,b)||(a.className+=" "+b)},i=function(a,b){var c;(c=g(a,b))&&(a.className=a.className.replace(c," "))},j=function(a,b,c){var d=c?"addEventListener":"removeEventListener";c&&j(a,b),f.forEach(function(c){a[d](c,b)})},k=function(a,c,d){var e=b.createEvent("Event");return e.initEvent(c,!0,!0),e.details=d||{},a.dispatchEvent(e),e},l=function(b,c){var d;a.HTMLPictureElement||(a.picturefill?picturefill({reevaluate:!0,reparse:!0,elements:[b]}):a.respimage?(c&&(d=b[respimage._.ns],d&&(d[c.srcset?"srcset":"src"]=void 0)),respimage({reparse:!0,elements:[b]})):c&&c.src&&(b.src=c.src))},m=function(a,b){return getComputedStyle(a,null)[b]},n=function(a,d){var e,f;for(a._lazysizesWidth||(f=a.getAttribute("alt"),a.alt=""),e=a.offsetWidth;e<c.minSize&&d&&d!=b.body&&!a._lazysizesWidth;)e=d.offsetWidth,d=d.parentNode;return a._lazysizesWidth||(null==f?a.removeAttribute("alt"):a.alt=f),e},o=function(a){var b;return setInterval(function(){b&&(b=!1,a())},66),function(c){c===!0?(b=!1,a()):b=!0}},p=function(){var f,g,n,p,r,s,t,u,v,w,x,y=navigator.userAgent,z=a.HTMLPictureElement&&y.match(/hrome\/(\d+)/)&&40==RegExp.$1,A=/blink|webkit/i.test(y),B=/^img$/i,C=/^iframe$/i,D=-2,E=D,F=D,G=D,H=!0,I=0,J=0,K=0,L=function(a){J--,a&&a.target&&j(a.target,L),(!a||0>J||!a.target)&&(J=0)},M=function(a,c){var e,f=a,g="hidden"!=m(a,"visibility");for(u-=c,x+=c,v-=c,w+=c;g&&(f=f.offsetParent)&&f!=d&&f!=b.body;)g=p&&4>J||(m(f,"opacity")||1)>0,g&&"visible"!=m(f,"overflow")&&(e=f.getBoundingClientRect(),g=w>e.left-1&&v<e.right+1&&x>e.top-1&&u<e.bottom+1);return g},N=function(){var a,b,d,e,h,i,j,k=f.length,l=Date.now(),m=K;if(H||S(),k){for(;k>m;m++,K++)if((i=f[m].getAttribute("data-expand"))&&(e=1*i)||(e=G),!(J>6&&(!i||"src"in f[m])))if(J>3&&e>D&&(e=D),j!==e&&(s=innerWidth+e,t=innerHeight+e,h=-1*e,j=e),a=f[m].getBoundingClientRect(),(x=a.bottom)>=h&&(u=a.top)<=t&&(w=a.right)>=h&&(v=a.left)<=s&&(x||w||v||u)&&(p&&G==E&&3>J&&4>I&&!i||M(f[m],e)))K--,l++,R(f[m]),d=!0;else{if(Date.now()-l>6)return K++,void O();!d&&p&&!b&&3>J&&4>I&&(g[0]||c.preloadAfterLoad)&&(g[0]||!i&&(x||w||v||u||"auto"!=f[m].getAttribute(c.sizesAttr)))&&(b=g[0]||f[m])}K=0,I++,F>G&&2>J&&I>4?(G=F,I=0,O()):G!=E&&(G=E),b&&!d&&R(b)}},O=o(N),P=function(a){h(a.target,c.loadedClass),i(a.target,c.loadingClass),j(a.target,P)},Q=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.setAttribute("src",b)}},R=function(a,b){var d,f,g,m,n,o,s,t,u,v,w,x=a.currentSrc||a.src,y=B.test(a.nodeName);if(A||p||!y||!x||a.complete){if(!(v=k(a,"lazybeforeunveil",{force:!!b})).defaultPrevented){if(n=a.getAttribute(c.sizesAttr)||a.getAttribute("sizes"),n&&("auto"==n?q.updateElem(a,!0):a.setAttribute("sizes",n)),s=a.getAttribute(c.srcsetAttr),o=a.getAttribute(c.srcAttr),w=v.details.firesLoad||"src"in a&&(s||o),w&&(J++,j(a,L,!0),clearTimeout(r),r=setTimeout(L,3e3),y&&(t=a.parentNode,u=e.test(t.nodeName||""))),s||o){if(u)for(d=t.getElementsByTagName("source"),f=0,g=d.length;g>f;f++)m=d[f].getAttribute(c.srcsetAttr),m&&d[f].setAttribute("srcset",m);s?(a.setAttribute("srcset",s),z&&n&&a.removeAttribute("src")):o&&(C.test(a.nodeName)?Q(a,o):a.setAttribute("src",o))}c.addClasses&&(h(a,c.loadingClass),j(a,P,!0))}setTimeout(function(){"auto"==n&&h(a,c.autosizesClass),(s||n)&&l(a,{srcset:s,src:o}),i(a,c.lazyClass),(!w||a.complete&&x==(a.currentSrc||a.src))&&(w&&L({target:a}),c.addClasses&&P({target:a})),a=null})}},S=function(){n&&!H&&(E=Math.max(Math.min(c.expand||c.threshold||150,300),30),F=Math.min(4*E,Math.max(1.1*innerHeight,d.clientHeight,3*E))),H=!0},T=function(){n=!0,H=!1},U=function(){T(),p=!0,O(!0)},V=function(){f=b.getElementsByClassName(c.lazyClass),g=b.getElementsByClassName(c.lazyClass+" "+c.preloadClass),c.scroll&&addEventListener("scroll",O,!0),addEventListener("resize",function(){H=!1,O()},!1),a.MutationObserver?new MutationObserver(O).observe(d,{childList:!0,subtree:!0,attributes:!0}):(d.addEventListener("DOMNodeInserted",O,!0),d.addEventListener("DOMAttrModified",O,!0)),addEventListener("hashchange",O,!0),["transitionstart","transitionend","load","focus","mouseover","animationend"].forEach(function(a){b.addEventListener(a,O,!0)}),addEventListener("load",U,!1),b.addEventListener("DOMContentLoaded",O,!1),setTimeout(T,666),O()};return{init:V,checkElems:O,unveil:R}}(),q=function(){var a,d=function(a,b){var d,f,g,h,i,j=a.parentNode;if(j&&(d=n(a,j),i=k(a,"lazybeforesizes",{width:d,dataAttr:!!b}),!i.defaultPrevented&&(d=i.details.width,d&&d!==a._lazysizesWidth&&(!c.onlyLargerSizes||!a._lazysizesWidth||a._lazysizesWidth<d)))){if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),e.test(j.nodeName||""))for(f=j.getElementsByTagName("source"),g=0,h=f.length;h>g;g++)f[g].setAttribute("sizes",d);i.details.dataAttr||l(a)}},f=function(){var b,c=a.length;if(c)for(b=0;c>b;b++)d(a[b])},g=o(f),h=function(){a=b.getElementsByClassName(c.autosizesClass),addEventListener("resize",g,!1)};return{init:h,checkElems:g,updateElem:d}}();return function(){var b,d={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",scroll:!0,autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",onlyLargerSizes:!0,minSize:40};c=a.lazySizesConfig||{};for(b in d)b in c||(c[b]=d[b]);a.lazySizesConfig=c,setTimeout(function(){q.init(),p.init()})}(),{cfg:c,autoSizer:q,loader:p,updateAllSizes:q.updateElems,updateAllLazy:p.checkElems,unveilLazy:p.unveil,uS:q.updateElem,uP:l,aC:h,rC:i,hC:g,fire:k,gW:n}}});