/*! lazysizes - v0.1.0 - 2014-10-11
 Licensed MIT */
!function(a){window.lazySizes=a(),"function"==typeof define&&define.amd&&define(function(){return window.lazySizes})}(function(){"use strict";function a(a){var b,c,d,e,f=a.getBoundingClientRect();return!!((b=f.bottom)>=-1*v&&(e=f.top)<=window.innerHeight+v&&(c=f.right)>=-1*v&&(d=f.left)<=window.innerWidth+v&&(b||c||d||e))}function b(a,b){var c;window.picturefill?picturefill({reevaluate:!0,reparse:!0,elements:[a]}):window.respimage&&!respimage._.observer&&(b&&(c=a[respimage._.ns],c&&(c[b.srcset?"srcset":"src"]=void 0)),respimage({reparse:!0,elements:[a]}))}function c(a){var b,c,d,e,f,g,h=a.getAttribute("data-tag")||"img",i=a.attributes;if(f=p.createElement(h),"script"!=h)for(b=0,c=i.length;c>b;b++)d=i[b].nodeName,e=d.replace(/^data\-/,""),"tag"!=e&&(!u[e]&&d in f||(e=d),f.setAttribute(e,i[b].nodeValue));return g=a.parentNode,g&&(g.insertBefore(f,a),"script"!=h?g.removeChild(a):y(function(){n(a,"lazyload")})),f}function d(){k=0,clearTimeout(j)}function e(a,d){var e,f,h,i,j=a.getAttribute("data-sizes"),k=a.getAttribute("data-src"),l=a.getAttribute("data-srcset"),o=a.parentNode;if(k||l){if(q.test(a.nodeName)&&(a=c(a)),s.test(a.nodeName||"")){if(z[k])return;z[k]=!0}else if(t.test(a.nodeName||"")){if(!d&&!a.complete&&a.getAttribute("src")&&a.src)return a.removeEventListener("load",A,!1),a.removeEventListener("error",A,!1),a.addEventListener("load",A,!1),void a.addEventListener("error",A,!1);if(r.test(o.nodeName||""))for(e=o.getElementsByTagName("source"),f=0,h=e.length;h>f;f++)i=e[f].getAttribute("data-srcset"),i&&e[f].setAttribute("srcset",i)}j&&("auto"==j?g(a,!0):a.setAttribute("sizes",j),a.removeAttribute("data-sizes")),l?(a.setAttribute("srcset",l),a.removeAttribute("data-srcset")):k&&(a.setAttribute("src",k),a.removeAttribute("data-src"))}y(function(){n(a,"lazyload"),"auto"==j&&m(a,"lazyautosizes"),(l||j)&&b(a,{srcset:l,src:k})})}function f(){i=0,clearTimeout(h)}function g(a,c){var d,e,f,g,h,i,j;if(g=a.parentNode,g&&(d=g.offsetWidth,e=a.offsetWidth,f=e>d?e:d)){if(f+="px",a.setAttribute("sizes",f),r.test(g.nodeName||""))for(h=g.getElementsByTagName("source"),i=0,j=h.length;j>i;i++)h[i].setAttribute("sizes",f);c||b(a)}}if(Date.now&&window.document.getElementsByClassName){var h,i,j,k,l,m,n,o,p=window.document,q=/^(?:span|div)$/i,r=/^picture$/i,s=/^script$/i,t=/^img$/i,u={sizes:1,src:1,srcset:1},v=99,w=p.getElementsByClassName("lazyload"),x=p.getElementsByClassName("lazyautosizes"),y=window.setImmediate||window.setTimeout,z={},A=function(a){e(a.target,!0),a.target.removeEventListener("load",A,!1),a.target.removeEventListener("error",A,!1)};p.documentElement.classList?(m=function(a,b){a.classList.add(b)},n=function(a,b){a.classList.remove(b)},o=function(a,b){a.classList.contains(b)}):(m=function(a,b){o(a,b)||(a.className+=" "+b)},n=function(a,b){var c;o(a,b)&&(c=new RegExp("(\\s|^)"+b+"(\\s|$)"),a.className=a.className.replace(c," "))},o=function(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))});var B=function(){var a,b,c=function(){b=!1,clearTimeout(a),d(),C()};return{debounce:function(){clearTimeout(a),clearTimeout(l),b=!0,a=setTimeout(c,66)},throttled:function(){b||(b=!0,clearTimeout(a),a=setTimeout(c,66))}}}(),C=function(){var b,c,f,g=w.length;if(g)for(b=Date.now(),f=0,c=k||0,d();g>c;c++)if(a(w[c]))e(w[c]);else if(f++,f>2&&g-1>c&&Date.now()-b>9){k=c+1,j=setTimeout(C,33);break}},D=function(){var a,b=function(){clearTimeout(a),f(),E()};return function(){clearTimeout(a),clearTimeout(h),a=setTimeout(b,99)}}(),E=function(){var a,b,c,d=x.length;if(d)for(b=Date.now(),c=i||0,a=c+3,f();d>c;c++)if(g(x[c]),c>a&&d-1>c&&Date.now()-b>9){i=c+1,h=setTimeout(E,33);break}},F=function(){v*=3,clearTimeout(l),window.MutationObserver?new MutationObserver(B.debounce).observe(p.body||p.documentElement,{childList:!0,subtree:!0}):(p.body||p.documentElement).addEventListener("DOMNodeInserted",B.debounce,!0),p.body.addEventListener("scroll",B.throttled,!0)};return window.addEventListener("scroll",B.throttled,!1),window.addEventListener("resize",B.debounce,!1),p.addEventListener("load",B.debounce,!0),p.addEventListener("touchmove",B.debounce,!0),p.addEventListener("readystatechange",B.debounce,!1),window.addEventListener("resize",D,!1),"complete"==p.readyState?F():window.addEventListener("load",F,!1),B.debounce(),{updateAllSizes:D,updateAllLazy:B.throttled,unveilLazy:function(a){o(a,"lazyload")&&e(a)},updateSizes:g}}});