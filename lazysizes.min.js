/*! lazysizes - v0.7.1 - 2015-01-02
 Licensed MIT */
!function(a){window.lazySizes=a(window),"function"==typeof define&&define.amd&&define(window.lazySizes)}(function(a){"use strict";function b(b,c){var d;a.HTMLPictureElement||(a.picturefill?picturefill({reevaluate:!0,reparse:!0,elements:[b]}):a.respimage?(c&&(d=b[respimage._.ns],d&&(d[c.srcset?"srcset":"src"]=void 0)),respimage({reparse:!0,elements:[b]})):c&&c.src&&(b.src=c.src))}function c(a,b){return getComputedStyle(a,null)[b]}function d(){n=0,clearTimeout(m)}function e(a,c){var d,e,f,h,i,k,l,m,n,q,r=D(a,"lazybeforeunveil",{force:!!c}),s=a.currentSrc||a.src;if(!r.defaultPrevented&&(u++,C(a,O,!0),clearTimeout(F),F=setTimeout(O,9999),i=a.getAttribute(j.sizesAttr)||a.getAttribute("sizes"),i&&("auto"==i?g(a,!0):a.setAttribute("sizes",i),j.clearAttr&&a.removeAttribute(j.sizesAttr)),l=a.getAttribute(j.srcsetAttr),k=a.getAttribute(j.srcAttr),(n=x.test(a.nodeName||""))&&(m=a.parentNode,q=w.test(m.nodeName||"")),j.addClasses&&(o(a,j.loadingClass),C(a,S,!0)),l||k)){if(q)for(d=m.getElementsByTagName("source"),e=0,f=d.length;f>e;e++)h=d[e].getAttribute(j.srcsetAttr),h&&d[e].setAttribute("srcset",h);l?(a.setAttribute("srcset",l),v&&i&&a.removeAttribute("src"),j.clearAttr&&a.removeAttribute(j.srcsetAttr)):k&&(a.setAttribute("src",k),j.clearAttr&&a.removeAttribute(j.srcAttr))}setTimeout(function(){p(a,j.lazyClass),"auto"==i&&o(a,j.autosizesClass),(l||i)&&b(a,{srcset:l,src:k}),a.lazyload&&(a.lazyload=0),r.details.firesLoad||n&&(l||k)&&(!a.complete||s!=(a.currentSrc||a.src))||(j.addClasses&&S({target:a}),C(a,O)),a=null},1)}function f(){l=0,clearTimeout(k)}function g(a,c){var d,e,f,g,h,i=a.parentNode;if(i&&(d=V(a,i),h=D(a,"lazybeforesizes",{width:d,dataAttr:!!c}),!h.defaultPrevented&&(d=h.details.width,d&&d!==a._lazysizesWidth&&(!j.onlyLargerSizes||!a._lazysizesWidth||a._lazysizesWidth<d)))){if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),w.test(i.nodeName||""))for(e=i.getElementsByTagName("source"),f=0,g=e.length;g>f;f++)e[f].setAttribute("sizes",d);h.details.dataAttr||b(a)}}if(Date.now&&a.document.getElementsByClassName){var h,i,j,k,l,m,n,o,p,q,r,s=a.document,t=s.documentElement,u=0,v=a.HTMLPictureElement&&navigator.userAgent.match(/hrome\/(\d+)/)&&(40==RegExp.$1||41==RegExp.$1),w=/^picture$/i,x=/^img$/i,y=0,z=y,A=9,B=0,C=function(a,b,c){var d=c?"addEventListener":"removeEventListener";c&&C(a,b),["load","error","lazyincluded"].forEach(function(c){a[d](c,b,!0)})},D=function(a,b,c){var d=s.createEvent("Event");return d.initEvent(b,!0,!0),d.details=c||{},a.dispatchEvent(d),d};o=function(a,b){q(a,b)||(a.className+=" "+b)},p=function(a,b){var c;(c=q(a,b))&&(a.className=a.className.replace(c," "))},q=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");return a.className.match(c)&&c};var E,F,G,H,I,J,K,L,M,N=Date.now(),O=function(a){u--,a&&a.target&&C(a.target,O),(!a||0>u||!a.target)&&(u=0)},P=function(){var a,b,c=function(){b=!1},e=function(){clearTimeout(a),d(),R(),setTimeout(c,3)};return function(){b||(b=!0,clearTimeout(a),a=setTimeout(e,66))}}(),Q=function(a){var b,d=a,e="hidden"!=c(a,"visibility"),f=3>u?z:y;for(I-=f,L+=f,J-=f,K+=f;e&&(d=d.offsetParent)&&d!=t&&d!=s.body;)e=c(d,"opacity")>.01,e&&"visible"!=c(d,"overflow")&&(b=d.getBoundingClientRect(),e=K>b.left-1&&J<b.right+1&&L>b.top-1&&I<b.bottom+1);return e},R=function(){var b,c,d;if(E=h.length,N=Date.now(),E){for(G=a.innerWidth+z,H=a.innerHeight+z,M=-1*z;E>n;n++)if(b=h[n].getBoundingClientRect(),(L=b.bottom)>=M&&(I=b.top)<=H&&(K=b.right)>=M&&(J=b.left)<=G&&(L||K||J||I)&&(r&&z==y&&9>B&&3>u||Q(h[n])))e(h[n]),d=!0;else{if(E-1>n&&Date.now()-N>9){c=!1,m=setTimeout(R);break}!d&&r&&!c&&j.preloadAfterLoad&&3>u&&(L||K||J||I||"auto"!=h[n].getAttribute(j.sizesAttr))&&(c=h[n])}B++,c&&!d&&e(c),A>z&&1>u&&!d&&B>9?(z=A,B=0,m=setTimeout(P,4)):z!=y&&(z=y)}},S=function(a){o(a.target,j.loadedClass),p(a.target,j.loadingClass),C(a.target,S)},T=function(){var a,b=function(){clearTimeout(a),f(),U()};return function(){clearTimeout(a),clearTimeout(k),a=setTimeout(b,99)}}(),U=function(){var a,b,c,d=i.length;if(d)for(b=Date.now(),c=l||0,a=c+3,f();d>c;c++)if(g(i[c]),c>a&&d-1>c&&Date.now()-b>9){l=c+1,k=setTimeout(U);break}},V=function(a,b){var d,e,f,g;for(a._lazysizesWidth||(g=a.getAttribute("alt"),a.alt=""),d=b.offsetWidth,e=a.offsetWidth,f=e>=d||e>j.minSize&&"block"==c(a,"display")?e:d;b&&b!=s.body&&f<j.minSize&&!a._lazysizesWidth;)f=b.offsetWidth,b=b.parentNode;return a._lazysizesWidth||(null==g?a.removeAttribute("alt"):a.alt=g),f},W=function(){z=j.threshold||200,y=z,A=4*z,s.addEventListener("load",P,!0),r=!0,P()},X=function(){j.mutation&&(a.MutationObserver?new MutationObserver(P).observe(t,{childList:!0,subtree:!0,attributes:!0}):(t.addEventListener("DOMNodeInserted",P,!0),t.addEventListener("DOMAttrModified",P,!0))),j.hover&&s.addEventListener("mouseover",P,!0),s.addEventListener("focus",P,!0),addEventListener("hashchange",P,!0),"onmozfullscreenchange"in t?addEventListener("mozfullscreenchange",P,!0):"onwebkitfullscreenchange"in t?addEventListener("webkitfullscreenchange",P,!0):addEventListener("fullscreenchange",P,!0),j.cssanimation&&(s.addEventListener("animationstart",P,!0),s.addEventListener("transitionstart",P,!0))};return j=a.lazySizesConfig||{},function(){var b,c={mutation:!0,hover:!0,cssanimation:!0,lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",scroll:!0,autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",onlyLargerSizes:!0,minSize:33};for(b in c)b in j||(j[b]=c[b]);a.lazySizesConfig=j}(),setTimeout(function(){h=s.getElementsByClassName(j.lazyClass),i=s.getElementsByClassName(j.autosizesClass),j.scroll&&addEventListener("scroll",P,!0),addEventListener("resize",P,!1),addEventListener("resize",T,!1),/^i|^loade|c/.test(s.readyState)?X():setTimeout(X),"complete"==s.readyState?W():(addEventListener("load",W,!1),s.addEventListener("readystatechange",P,!1)),P()}),p(t,"no-js"),{cfg:j,updateAllSizes:T,updateAllLazy:function(a){a?(d(),R()):P()},unveilLazy:function(a){q(a,j.lazyClass)&&e(a)},uS:g,uP:b,aC:o,rC:p,hC:q,fire:D,gW:V}}});