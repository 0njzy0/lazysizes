/*! lazysizes - v0.6.1 - 2014-12-23
 Licensed MIT */
!function(a){window.lazySizes=a(window),"function"==typeof define&&define.amd&&define(function(){return window.lazySizes})}(function(a){"use strict";function b(b,c){var d;a.picturefill?picturefill({reevaluate:!0,reparse:!0,elements:[b]}):a.respimage&&(c&&(d=b[respimage._.ns],d&&(d[c.srcset?"srcset":"src"]=void 0)),respimage({reparse:!0,elements:[b]}))}function c(a){u++,a=e(a),z(a,L,!0),clearTimeout(C),C=setTimeout(L,3e3)}function d(){n=0,clearTimeout(m)}function e(a,c){var d,e,f,h,i,k,l,m,n,q,r=A(a,"lazybeforeunveil",{force:!!c}),s=a.currentSrc||a.src;if(!r.defaultPrevented&&(i=a.getAttribute(j.sizesAttr)||a.getAttribute("sizes"),i&&("auto"==i?g(a,!0):a.setAttribute("sizes",i),j.clearAttr&&a.removeAttribute(j.sizesAttr)),l=a.getAttribute(j.srcsetAttr),k=a.getAttribute(j.srcAttr),(n=w.test(a.nodeName||""))&&(m=a.parentNode,q=v.test(m.nodeName||"")),j.addClasses&&(o(a,j.loadingClass),z(a,O,!0)),l||k)){if(q)for(d=m.getElementsByTagName("source"),e=0,f=d.length;f>e;e++)h=d[e].getAttribute(j.srcsetAttr),h&&d[e].setAttribute("srcset",h);l?(a.setAttribute("srcset",l),j.clearAttr&&a.removeAttribute(j.srcsetAttr)):k&&(a.setAttribute("src",k),j.clearAttr&&a.removeAttribute(j.srcAttr))}return y(function(){p(a,j.lazyClass),"auto"==i&&o(a,j.autosizesClass),(l||i)&&b(a,{srcset:l,src:k}),a.lazyload&&(a.lazyload=0),!r.details.stopSwitchClass&&j.addClasses&&(!n||!l&&!k||a.complete&&s==(a.currentSrc||a.src))&&O({target:a})}),a}function f(){l=0,clearTimeout(k)}function g(a,c){var d,e,f,g,h,i,k,l;if(g=a.parentNode){if(d=g.offsetWidth,e=a.offsetWidth,f=e>d?e:d,!f&&!a._lazysizesWidth)for(;g&&g!=s.body&&!f;)f=g.offsetWidth,g=g.parentNode;if(l=A(a,"lazybeforesizes",{width:f,dataAttr:!!c}),!l.defaultPrevented&&(f=l.details.width,f&&f!==a._lazysizesWidth&&(!j.onlyLargerSizes||!a._lazysizesWidth||a._lazysizesWidth<f))){if(a._lazysizesWidth=f,f+="px",a.setAttribute("sizes",f),v.test(g.nodeName||""))for(h=g.getElementsByTagName("source"),i=0,k=h.length;k>i;i++)h[i].setAttribute("sizes",f);l.details.dataAttr||b(a)}}}if(Date.now&&a.document.getElementsByClassName){var h,i,j,k,l,m,n,o,p,q,r,s=a.document,t=s.documentElement,u=0,v=/^picture$/i,w=/^img$/i,x=10,y=a.setImmediate||a.setTimeout,z=function(a,b,c){var d=c?"addEventListener":"removeEventListener";c&&z(a,b),a[d]("load",b,!1),a[d]("error",b,!1),a[d]("lazyincluded",b,!1)},A=function(a,b,c){var d=s.createEvent("Event");return d.initEvent(b,!0,!0),d.details=c||{},a.dispatchEvent(d),d};o=function(a,b){q(a,b)||(a.className+=" "+b)},p=function(a,b){var c;q(a,b)&&(c=new RegExp("(\\s|^)"+b+"(\\s|$)"),a.className=a.className.replace(c," "))},q=function(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))};var B,C,D,E,F,G,H,I,J,K=Date.now(),L=function(a){u--,clearTimeout(C),a&&a.target&&z(a.target,L),(!a||0>u||!a.target)&&(u=0)},M=function(){var a,b,c=function(){b=!1},e=function(){clearTimeout(a),d(),N(),setTimeout(c)};return function(){b||(b=!0,clearTimeout(a),a=setTimeout(e,66))}}(),N=function(){var b,d,f;if(B=h.length,K=Date.now(),B){for(D=a.innerWidth+x,E=a.innerHeight+x,J=-1*x;B>n;n++)if(b=h[n].getBoundingClientRect(),(I=b.bottom)>=J&&(F=b.top)<=E&&(H=b.right)>=J&&(G=b.left)<=D&&(I||H||G||F)&&(!r||"hidden"!=getComputedStyle(h[n],null).visibility))"onload"in h[n]?c(h[n]):e(h[n]),f=!0;else{if(B-1>n&&Date.now()-K>9){d=!1,m=setTimeout(N,4);break}!f&&r&&!d&&j.preloadAfterLoad&&2>u&&(I||H||G||F||"auto"!=h[n].getAttribute(j.sizesAttr))&&(d=h[n])}d&&!f&&c(d)}},O=function(a){o(a.target,j.loadedClass),p(a.target,j.loadingClass),z(a.target,O)},P=function(){var a,b=function(){clearTimeout(a),f(),Q()};return function(){clearTimeout(a),clearTimeout(k),a=setTimeout(b,99)}}(),Q=function(){var a,b,c,d=i.length;if(d)for(b=Date.now(),c=l||0,a=c+3,f();d>c;c++)if(g(i[c]),c>a&&d-1>c&&Date.now()-b>9){l=c+1,k=setTimeout(Q,4);break}},R=function(){x=j.preloadAfterLoad?60:280,s.addEventListener("load",M,!0),r=!0},S=function(){j.mutation&&(a.MutationObserver?new MutationObserver(M).observe(t,{childList:!0,subtree:!0,attributes:!0}):(t.addEventListener("DOMNodeInserted",M,!0),t.addEventListener("DOMAttrModified",M,!0))),j.hover&&s.addEventListener("mouseover",M,!0),s.addEventListener("focus",M,!0),a.addEventListener("hashchange",M,!0),"onmozfullscreenchange"in t?a.addEventListener("mozfullscreenchange",M,!0):"onwebkitfullscreenchange"in t?a.addEventListener("webkitfullscreenchange",M,!0):a.addEventListener("fullscreenchange",M,!0),j.cssanimation&&(s.addEventListener("animationstart",M,!0),s.addEventListener("transitionstart",M,!0))};return j=a.lazySizesConfig||{},function(){var a,b={mutation:!0,hover:!0,cssanimation:!0,lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",scroll:!0,autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",preloadAfterLoad:!0,onlyLargerSizes:!0};for(a in b)a in j||(j[a]=b[a])}(),setTimeout(function(){h=s.getElementsByClassName(j.lazyClass),i=s.getElementsByClassName(j.autosizesClass),j.scroll&&addEventListener("scroll",function(){var b,c,d,e,f,g=function(){var a=c.scrollTop||c.pageYOffset||0,b=c.scrollLeft||c.pageXOffset||0;c=null,Math.abs(e-a)<99&&Math.abs(f-b)<99&&h()},h=function(){M(),clearTimeout(b),clearTimeout(d),c=null};return function(i){var j=i.target==s?a:i.target;clearTimeout(b),b=setTimeout(h,44),c?j!=c&&h():(c=j,e=c.scrollTop||c.pageYOffset||0,f=c.scrollLeft||c.pageXOffset||0,clearTimeout(d),d=setTimeout(g,99)),j=null}}(),!0),addEventListener("resize",M.debounce,!1),addEventListener("resize",P,!1),/^i|^loade|c/.test(s.readyState)?S():s.addEventListener("DOMContentLoaded",S,!1),"complete"==s.readyState?R():(addEventListener("load",R,!1),s.addEventListener("readystatechange",M,!1)),M(),p(t,"no-js")}),{cfg:j,updateAllSizes:P,updateAllLazy:function(a){a?(d(),N()):M()},unveilLazy:function(a){q(a,j.lazyClass)&&e(a)},updateSizes:g,updatePolyfill:b,aC:o,rC:p,hC:q,fire:A}}});