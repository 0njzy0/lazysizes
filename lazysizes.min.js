/*! lazysizes - v0.7.1 - 2015-01-04
 Licensed MIT */
!function(a){window.lazySizes=a(window),"function"==typeof define&&define.amd&&define(window.lazySizes)}(function(a){"use strict";function b(b,c){var d;a.HTMLPictureElement||(a.picturefill?picturefill({reevaluate:!0,reparse:!0,elements:[b]}):a.respimage?(c&&(d=b[respimage._.ns],d&&(d[c.srcset?"srcset":"src"]=void 0)),respimage({reparse:!0,elements:[b]})):c&&c.src&&(b.src=c.src))}function c(a,b){return getComputedStyle(a,null)[b]}function d(a,c){var d,e,g,h,j,k,n,o,p,q=C(a,"lazybeforeunveil",{force:!!c}),w=a.currentSrc||a.src;if(!q.defaultPrevented&&(r++,B(a,N,!0),clearTimeout(E),E=setTimeout(N,3e3),j=a.getAttribute(i.sizesAttr)||a.getAttribute("sizes"),j&&("auto"==j?f(a,!0):a.setAttribute("sizes",j),i.clearAttr&&a.removeAttribute(i.sizesAttr)),n=a.getAttribute(i.srcsetAttr),k=a.getAttribute(i.srcAttr),u.test(a.nodeName)&&(o=a.parentNode,p=t.test(o.nodeName||"")),i.addClasses&&(l(a,i.loadingClass),B(a,R,!0)),n||k)){if(p)for(d=o.getElementsByTagName("source"),e=0,g=d.length;g>e;e++)h=d[e].getAttribute(i.srcsetAttr),h&&d[e].setAttribute("srcset",h);n?(a.setAttribute("srcset",n),s&&j&&a.removeAttribute("src"),i.clearAttr&&a.removeAttribute(i.srcsetAttr)):k&&(a.setAttribute("src",k),i.clearAttr&&a.removeAttribute(i.srcAttr))}setTimeout(function(){m(a,i.lazyClass),"auto"==j&&l(a,i.autosizesClass),(n||j)&&b(a,{srcset:n,src:k}),a.lazyload&&(a.lazyload=0),q.details.firesLoad||v.test(a.nodeName)&&(n||k)&&(!a.complete||w!=(a.currentSrc||a.src))||(i.addClasses&&R({target:a}),N({target:a})),a=null},1)}function e(){k=0,clearTimeout(j)}function f(a,c){var d,e,f,g,h,j=a.parentNode;if(j&&(d=U(a,j),h=C(a,"lazybeforesizes",{width:d,dataAttr:!!c}),!h.defaultPrevented&&(d=h.details.width,d&&d!==a._lazysizesWidth&&(!i.onlyLargerSizes||!a._lazysizesWidth||a._lazysizesWidth<d)))){if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),t.test(j.nodeName||""))for(e=j.getElementsByTagName("source"),f=0,g=e.length;g>f;f++)e[f].setAttribute("sizes",d);h.details.dataAttr||b(a)}}if(Date.now&&a.document.getElementsByClassName){var g,h,i,j,k,l,m,n,o,p=a.document,q=p.documentElement,r=0,s=a.HTMLPictureElement&&navigator.userAgent.match(/hrome\/(\d+)/)&&(40==RegExp.$1||41==RegExp.$1),t=/^picture$/i,u=/^img$/i,v=/^(?:img|iframe)$/i,w=-2,x=w,y=9,z=0,A=0,B=function(a,b,c){var d=c?"addEventListener":"removeEventListener";c&&B(a,b),["load","error","lazyincluded","_lazyloaded"].forEach(function(c){a[d](c,b,!0)})},C=function(a,b,c){var d=p.createEvent("Event");return d.initEvent(b,!0,!0),d.details=c||{},a.dispatchEvent(d),d};l=function(a,b){n(a,b)||(a.className+=" "+b)},m=function(a,b){var c;(c=n(a,b))&&(a.className=a.className.replace(c," "))},n=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");return a.className.match(c)&&c};var D,E,F,G,H,I,J,K,L,M=Date.now(),N=function(a){r--,a&&a.target&&B(a.target,N),(!a||0>r||!a.target)&&(r=0)},O=function(){var a,b,c=function(){b=!1},d=function(){clearTimeout(a),A=0,Q(),setTimeout(c,3)};return function(){b||(b=!0,clearTimeout(a),a=setTimeout(d,66))}}(),P=function(a){var b,d=a,e="hidden"!=c(a,"visibility"),f=3>r?x:-2;for(H-=f,K+=f,I-=f,J+=f;e&&(d=d.offsetParent)&&d!=q&&d!=p.body;)e=c(d,"opacity")>0,e&&"visible"!=c(d,"overflow")&&(b=d.getBoundingClientRect(),e=J>b.left-1&&I<b.right+1&&K>b.top-1&&H<b.bottom+1);return e},Q=function(){var a,b,c;if(D=g.length,M=Date.now(),D){for(F=innerWidth+x,G=innerHeight+x,L=-1*x;D>A;A++)if(r>3&&x>0&&(x=-2,F=innerWidth+x,G=innerHeight+x,L=-1*x),a=g[A].getBoundingClientRect(),(K=a.bottom)>=L&&(H=a.top)<=G&&(J=a.right)>=L&&(I=a.left)<=F&&(K||J||I||H)&&(o&&x==w&&3>r&&9>z||P(g[A])))d(g[A]),c=!0;else if(!c&&o&&!b&&i.preloadAfterLoad&&3>r&&9>z&&(K||J||I||H||"auto"!=g[A].getAttribute(i.sizesAttr))&&(b=g[A]),D-1>A&&Date.now()-M>9){b=!1,setTimeout(Q);break}z++,y>x&&2>r&&z>9?(x=y,z=0,setTimeout(O,4)):x!=w&&(x=w),b&&!c&&d(b)}},R=function(a){l(a.target,i.loadedClass),m(a.target,i.loadingClass),B(a.target,R)},S=function(){var a,b=function(){clearTimeout(a),e(),T()};return function(){clearTimeout(a),clearTimeout(j),a=setTimeout(b,99)}}(),T=function(){var a,b,c,d=h.length;if(d)for(b=Date.now(),c=k||0,a=c+3,e();d>c;c++)if(f(h[c]),c>a&&d-1>c&&Date.now()-b>9){k=c+1,j=setTimeout(T);break}},U=function(a,b){var d,e,f,g;for(a._lazysizesWidth||(g=a.getAttribute("alt"),a.alt=""),d=b.offsetWidth,e=a.offsetWidth,f=e>=d||e>i.minSize&&"block"==c(a,"display")?e:d;b&&b!=p.body&&f<i.minSize&&!a._lazysizesWidth;)f=b.offsetWidth,b=b.parentNode;return a._lazysizesWidth||(null==g?a.removeAttribute("alt"):a.alt=g),f},V=function(){w=Math.max(Math.min(i.threshold||200,300),60),y=Math.min(5*w,Math.max(innerHeight+9,500,q.clientHeight+9)),o=/d$|^c/.test(p.readyState),x=o?y:w};return i=a.lazySizesConfig||{},function(){var b,c={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",scroll:!0,autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",onlyLargerSizes:!0,minSize:33};for(b in c)b in i||(i[b]=c[b]);a.lazySizesConfig=i}(),setTimeout(function(){var b=p.readyState;g=p.getElementsByClassName(i.lazyClass),h=p.getElementsByClassName(i.autosizesClass),i.scroll&&addEventListener("scroll",O,!0),addEventListener("resize",O,!1),addEventListener("resize",S,!1),a.MutationObserver?new MutationObserver(O).observe(q,{childList:!0,subtree:!0,attributes:!0}):(q.addEventListener("DOMNodeInserted",O,!0),q.addEventListener("DOMAttrModified",O,!0)),addEventListener("hashchange",O,!0),["transitionstart","transitionend","load","focus","mouseover"].forEach(function(a){p.addEventListener(a,O,!0)}),p.addEventListener("DOMContentLoaded",O,!1),/d$|^c/.test(b)?V():(addEventListener("load",V,!1),setTimeout(V,9999),setTimeout(O))}),{cfg:i,updateAllSizes:S,updateAllLazy:function(a){a?(A=0,Q()):O()},unveilLazy:function(a){n(a,i.lazyClass)&&d(a)},uS:f,uP:b,aC:l,rC:m,hC:n,fire:C,gW:U}}});