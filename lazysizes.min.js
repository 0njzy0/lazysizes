/*! lazysizes - v0.1.2-pre - 2014-10-13
 Licensed MIT */
!function(a){window.lazySizes=a(),"function"==typeof define&&define.amd&&define(function(){return window.lazySizes})}(function(){"use strict";function a(a,b){var c;window.picturefill?picturefill({reevaluate:!0,reparse:!0,elements:[a]}):window.respimage&&!respimage._.observer?(b&&(c=a[respimage._.ns],c&&(c[b.srcset?"srcset":"src"]=void 0)),respimage({reparse:!0,elements:[a]})):!window.HTMLPictureElement&&window.console&&"complete"==r.readyState&&console.log("Please use a responsive image polyfill, like respimage or picturefill. https://github.com/aFarkas/respimage")}function b(a){var b,c,d,e,f,g,h=a.getAttribute("data-tag")||"img",j=a.attributes;if(f=r.createElement(h),"script"!=h)for(b=0,c=j.length;c>b;b++)d=j[b].nodeName,e=d.replace(/^data\-/,""),"tag"!=e&&(!w[e]&&d in f||(e=d),f.setAttribute(e,j[b].value));return g=a.parentNode,g&&(g.insertBefore(f,a),"script"!=h?g.removeChild(a):(a.removeAttribute(i.srcAttr),y(function(){p(a,i.lazyClass)}))),f}function c(){m=0,clearTimeout(l)}function d(c,d){var e,g,h,j,k=c.getAttribute(i.sizesAttr),l=c.getAttribute(i.srcAttr),m=c.getAttribute(i.srcsetAttr),n=c.parentNode;if(l||m){if(s.test(c.nodeName)&&(c=b(c)),u.test(c.nodeName||"")){if(z[l])return;z[l]=!0}else if(v.test(c.nodeName||"")){if(!d&&!c.complete&&c.getAttribute("src")&&c.src&&!c.lazyload)return c.removeEventListener("load",A,!1),c.removeEventListener("error",A,!1),c.addEventListener("load",A,!1),void c.addEventListener("error",A,!1);if(t.test(n.nodeName||""))for(e=n.getElementsByTagName("source"),g=0,h=e.length;h>g;g++)j=e[g].getAttribute(i.srcsetAttr),j&&e[g].setAttribute("srcset",j)}k&&("auto"==k?f(c,!0):c.setAttribute("sizes",k),c.removeAttribute(i.sizesAttr),!m&&window.console&&c.getAttribute("srcset")&&console.log("using lazysizes with a `srcset` attribute is not good. Use `data-srcset` instead")),m?(c.setAttribute("srcset",m),c.removeAttribute(i.srcsetAttr)):l&&(c.setAttribute("src",l),c.removeAttribute(i.srcAttr))}y(function(){p(c,i.lazyClass),"auto"==k&&o(c,i.autosizesClass),(m||k)&&a(c,{srcset:m,src:l})})}function e(){k=0,clearTimeout(j)}function f(b,c){var d,e,f,g,h,i,j;if(g=b.parentNode,g&&(d=g.offsetWidth,e=b.offsetWidth,f=e>d?e:d,f&&(!b._lazysizesWidth||e>99))){if(b._lazysizesWidth=1,f+="px",b.setAttribute("sizes",f),t.test(g.nodeName||""))for(h=g.getElementsByTagName("source"),i=0,j=h.length;j>i;i++)h[i].setAttribute("sizes",f);c||a(b)}}if(Date.now&&window.document.getElementsByClassName){var g,h,i,j,k,l,m,n,o,p,q,r=window.document,s=/^(?:span|div)$/i,t=/^picture$/i,u=/^script$/i,v=/^img$/i,w={sizes:1,src:1,srcset:1},x=66,y=window.setImmediate||window.setTimeout,z={},A=function(a){a.target.removeEventListener("load",A,!1),a.target.removeEventListener("error",A,!1),d(a.target,!0)};r.documentElement.classList?(o=function(a,b){a.classList.add(b)},p=function(a,b){a.classList.remove(b)},q=function(a,b){a.classList.contains(b)}):(o=function(a,b){q(a,b)||(a.className+=" "+b)},p=function(a,b){var c;q(a,b)&&(c=new RegExp("(\\s|^)"+b+"(\\s|$)"),a.className=a.className.replace(c," "))},q=function(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))});var B,C,D,E,F,G,H,I,J,K=function(){var a,b,d=function(){b=!1},e=function(){clearTimeout(a),c(),L(),setTimeout(d)};return{debounce:function(){clearTimeout(a),clearTimeout(n),b=!0,a=setTimeout(e,66)},throttled:function(){b||(b=!0,clearTimeout(a),a=setTimeout(e,99))}}}(),L=function(){var a;if(B=g.length)for(C=Date.now(),D=window.innerWidth+x,E=window.innerHeight+x,J=-1*x;B>m;m++)if(a=g[m].getBoundingClientRect(),(I=a.bottom)>=J&&(F=a.top)<=E&&(H=a.right)>=J&&(G=a.left)<=D&&(I||H||G||F))d(g[m]);else if(B-1>m&&Date.now()-C>7){m+=1,l=setTimeout(L,20);break}},M=function(){var a,b=function(){clearTimeout(a),e(),N()};return function(){clearTimeout(a),clearTimeout(j),a=setTimeout(b,99)}}(),N=function(){var a,b,c,d=h.length;if(d)for(b=Date.now(),c=k||0,a=c+3,e();d>c;c++)if(f(h[c]),c>a&&d-1>c&&Date.now()-b>9){k=c+1,j=setTimeout(N,20);break}},O=function(){x*=5,clearTimeout(n),r.addEventListener("load",K.throttled,!0)},P=function(){var a=r.body||r.documentElement;i.mutation&&(window.MutationObserver?new MutationObserver(K.throttled).observe(r.documentElement,{childList:!0,subtree:!0,attributes:!0}):(a.addEventListener("DOMNodeInserted",K.throttled,!0),r.documentElement.addEventListener("DOMAttrModified",K.throttled,!0))),i.hover&&r.addEventListener("mouseover",K.throttled,!0),r.addEventListener("focus",K.throttled,!0),window.addEventListener("hashchange",K.throttled,!0),"onmozfullscreenchange"in a?window.addEventListener("mozfullscreenchange",K.throttled,!0):"onwebkitfullscreenchange"in a?window.addEventListener("webkitfullscreenchange",K.throttled,!0):window.addEventListener("fullscreenchange",K.throttled,!0),i.cssanimation&&(r.addEventListener("animationstart",K.throttled,!0),r.addEventListener("transitionstart",K.throttled,!0))};return setTimeout(function(){var a,b={mutation:!0,hover:!0,cssanimation:!0,lazyClass:"lazyload",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes"};i=window.lazySizesConfig||{};for(a in b)a in i||(i[a]=b[a]);g=r.getElementsByClassName(i.lazyClass),h=r.getElementsByClassName(i.autosizesClass),window.addEventListener("scroll",K.throttled,!1),(r.body||r.documentElement).addEventListener("scroll",K.throttled,!0),r.addEventListener("touchmove",K.throttled,!1),window.addEventListener("resize",K.debounce,!1),window.addEventListener("resize",M,!1),/^i|^loade|c/.test(r.readyState)?P():r.addEventListener("DOMContentLoaded",P,!1),"complete"==r.readyState?O():(window.addEventListener("load",O,!1),r.addEventListener("readystatechange",K.throttled,!1)),K.throttled(),"lazySizesConfig"in window&&(window.lazySizesConfig=null)},r.body?9:99),{updateAllSizes:M,updateAllLazy:K.throttled,unveilLazy:function(a){q(a,i.lazyClass)&&d(a)},updateSizes:f,transformDummy:b,updatePolyfill:a}}});